@model StaffPortal.Entities.State
   
@{
    <script src="/Lib/jquery/dist/jquery.js"></script>
    <form asp-controller="Demo" asp-action="Index" method="post" class="form-horizontal" role="form">
        <div class="form-group">

            <div asp-validation-summary="All" class="text-danger"></div>
            <div class="form-group">
                <label asp-for="Name"> State</label>
                <select asp-for="Id" class="form-control"
                        asp-items="@(new SelectList(ViewBag.ListofStates, "Id", "Name"))"></select>
                <span asp-validation-for="Name" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Name"> Local Government</label>
                <select asp-for="LocalId" class="form-control" id="LocalId" name="LocalId"
                        asp-items="@(new SelectList(String.Empty, "Id", "Name"))"></select>
                <span asp-validation-for="Name" class="text-danger"></span>
            </div>


            <button type="submit" class="btn btn-success mr-2">Submit</button>
        </div>
    </form>

    <script  type="text/javascript">
        $(document).ready(function () {
            $('#Id').change(function () {
                var url = '@Url.Content("~/")' + "Demo/GetLocal";
                var ddlsource = "#Id";
                $.getJSON(url, { StateId: $(ddlsource).val() }, function (data) {
                    var items = '';
                    $("#LocalId").empty();
                    $.each(data, function (i, local) {
                        items += "<option value='" + local.value + "'>" + local.text + "</option >";
                    });
                    $('#LocalId').html(items);
                });
            });
    </script>
}
